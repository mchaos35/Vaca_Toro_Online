<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>&#x1f404; Vacas y &#x1f402; Toros Online</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="register-screen" id="registerScreen">
    <div class="card register-card">
        <h1>&#x1f404; Vacas y &#x1f402; Toros <span style="color: var(--accent-color);">Online</span></h1>
        <p>Ver.<span style="color: var(--accent-color);"> 1.3</span></p>
        
        <div id="authTabs">
            <button class="auth-tab active" data-tab="login">Iniciar Sesi√≥n</button>
            <button class="auth-tab" data-tab="register">Registrarse</button>
        </div>
        
        <!-- Formulario de Login (ahora aparece primero) -->
        <div id="loginForm" class="auth-form" style="display: block;">
            <input type="text" class="input-field" id="loginUsernameInput" placeholder="Nombre de usuario" maxlength="20">
            <input type="password" class="input-field" id="loginPasswordInput" placeholder="Contrase√±a">
            <p id="loginError" style="color: var(--danger-color); margin: 10px 0; display: none;"></p>
            <button class="btn btn-primary" id="loginBtn" style="margin-top: 20px;">
                <span class="emoji">&#x1f511;</span> Iniciar Sesi√≥n
            </button>
        </div>
        
        <!-- Formulario de Registro -->
        <div id="registerForm" class="auth-form" style="display: none;">
            <input type="text" class="input-field" id="regUsernameInput" placeholder="Nombre de usuario" maxlength="20">
            <input type="password" class="input-field" id="regPasswordInput" placeholder="Contrase√±a">
            <input type="password" class="input-field" id="regConfirmPasswordInput" placeholder="Confirmar contrase√±a">
            <p id="regError" style="color: var(--danger-color); margin: 10px 0; display: none;"></p>
            <button class="btn btn-primary" id="registerBtn" style="margin-top: 20px;">
                <span class="emoji">&#x1f3ae;</span> Registrarse
            </button>
        </div>
    </div>
</div>
    
    <div class="container" id="mainContainer" style="display: none;">
        <div class="sidebar" id="sidebar">
            <h2>&#x1f465; Jugadores</h2>
            <ul class="player-list" id="playerList"></ul>
        </div>
        
        <div class="main-content">
            <div class="card game-description-card">
    <h1>&#x1f404; Vacas y <span style="color: var(--accent-color);">&#x1f402; Toros</span></h1>
    <p>Ver.<span style="color: var(--accent-color);"> 1.3</span></p>
	<div style="text-align: left;">
    <p>Un juego de l√≥gica donde debes adivinar un n√∫mero de d√≠gitos √∫nicos. Cada intento te dar√° pistas:<br>
    <strong>"Toro"</strong> (üêÇ): d√≠gito correcto en la posici√≥n correcta.<br>
    <strong>"Vaca"</strong> (üêÑ): d√≠gito correcto pero en posici√≥n equivocada.</p>
	</div>
</div>
            
			    <div class="card multiplayer-menu-card" id="multiplayerMenu" style="display: none;">
        <h2>Modo Multijugador</h2>
        <div class="multiplayer-actions">
            <button class="btn btn-primary" id="createGameBtn">Crear Partida</button>
            <button class="btn btn-secondary" id="joinGameBtn">Unirse a Partida</button>
            <button class="btn btn-danger" id="backToMainBtn">Volver al Men√∫</button>
        </div>
        <h3 style="margin-top: 20px;">Partidas Disponibles</h3>
        <div id="gamesList" class="games-list"></div>
    </div>
			
            <!-- Contenedor de bienvenida (visible inicialmente) -->
            <div class="card" id="welcomeCard">
    <h2>üìã C√≥mo jugar</h2>
    <ol style="margin-top: 15px; margin-left: 20px;">
        <li><strong>Modo 1: Duelo</strong> - Invita a otro jugador para un desaf√≠o 1vs1 desde el panel de Jugadores</li>
        <li><strong>Modo 2: Multijugador</strong> - Crea o √∫nete a partidas hasta 4 jugadores</li>
        <li>Selecciona el modo de juego que prefieras</li>
        <li>Cuando todos est√©n listos, comienza la partida</li>
        <li>Por turnos, intenta adivinar el n√∫mero siguiendo las pistas</li>
        <li>‚ùó El primero en adivinar el n√∫mero gana puntos y sube en el ranking!</li>
    </ol>
    
    <h2 style="margin-top: 20px;">üåü Modos de juego</h2>
    <ul style="margin-top: 15px; margin-left: 20px;">
        <li><strong>Cl√°sico (4 d√≠gitos)</strong>: 
            <ul style="margin-left: 15px; margin-top: 5px;">
                <li>Adivina un n√∫mero de 4 d√≠gitos √∫nicos</li>
                <li>45 segundos por turno</li>
                <li>+100 puntos base por victoria</li>
            </ul>
        </li>
        
        <li style="margin-top: 10px;"><strong>Avanzado (5 d√≠gitos)</strong>:
            <ul style="margin-left: 15px; margin-top: 5px;">
                <li>Mayor desaf√≠o con n√∫meros de 5 d√≠gitos</li>
                <li>60 segundos por turno</li>
                <li>+150 puntos base por victoria</li>
            </ul>
        </li>
        
        <li style="margin-top: 10px;"><strong>Experto (6 d√≠gitos)</strong>:
            <ul style="margin-left: 15px; margin-top: 5px;">
                <li>Para jugadores experimentados</li>
                <li>60 segundos por turno</li>
                <li>+200 puntos base por victoria</li>
            </ul>
        </li>
        
        <li style="margin-top: 10px;"><strong>Carrera Multijugador</strong>:
            <ul style="margin-left: 15px; margin-top: 5px;">
                <li>Hasta 4 jugadores compitiendo</li>
                <li>Todos adivinan el mismo n√∫mero generado aleatoriamente</li>
                <li>45 segundos por turno</li>
                <li>+120 puntos base al ganador</li>
                <li>Puntos adicionales por velocidad</li>
            </ul>
        </li>
    </ul>
    
    <div style="margin-top: 25px; padding: 15px; background: rgba(106, 90, 205, 0.1); border-radius: 8px;">
        <h3>üèÜ Sistema de Puntos</h3>
        <p>Gana m√°s puntos adivinando m√°s r√°pido! Tu puntuaci√≥n final considera:</p>
        <ul style="margin-left: 20px; margin-top: 8px;">
            <li>Modo de juego (base)</li>
            <li>Cantidad de intentos (menos = m√°s puntos)</li>
            <li>Tiempo utilizado (m√°s r√°pido = m√°s puntos)</li>
            <li>Bonus por racha de victorias</li>
        </ul>
    </div>
</div>
            
            <!-- Contenedor del juego (oculto inicialmente) -->
            <div class="game-container" id="gameContainer" style="display: none;">
                <div class="card game-board" id="gameBoard">
                    <div class="game-info">
                        <div>
                            <h3>Partida contra: <span id="opponentName"></span></h3>
                            <p id="turnIndicator">Es tu turno &#x1f3af;</p>
                            <p id="gameModeIndicator" class="game-mode-indicator"></p>
                            <div id="secretNumberContainer" style="margin-top: 10px; display: none;">
                                <span>Tu n√∫mero: </span>
                                <span id="yourSecretNumber" style="font-weight: bold;"></span>
                                <button id="toggleSecretNumberBtn" class="secret-number-toggle">
                                    <span id="toggleSecretNumberIcon">üëÅÔ∏è‚Äçüó®Ô∏è</span>
                                </button>
                            </div>
                        </div>
                        <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 10px;">
                            <div id="gameStatus"></div>
                            <button class="btn btn-danger" id="quitGameBtn" style="display: none; width: 120px;">
                                <span class="emoji">&#x1f6ab;</span> Abandonar
                            </button>
                        </div>
                    </div>
                    
                    <div class="guess-form">
                        <input type="text" class="input-field guess-input" id="guessInput" placeholder="Ingresa tu numero" maxlength="6">
                        <button class="btn btn-primary" id="submitGuessBtn" style="width: 120px;">Adivinar</button>
                    </div>
                    
                    <div class="guesses-container">
                        <div>
                            <h4>Tus intentos</h4>
                            <ul class="guess-list" id="yourGuesses"></ul>
                        </div>
                        <div>
                            <h4>Intentos del oponente</h4>
                            <ul class="guess-list" id="opponentGuesses"></ul>
                        </div>
                    </div>
                </div>
                
                <div class="card game-chat" id="gameChat">
                    <div class="chat-header">
                        &#x1f4ac; Chat con <span id="chatOpponentName"></span>
                    </div>
                    <div class="chat-messages" id="chatMessages"></div>
                    <div class="chat-input-container">
                        <div class="chat-input-wrapper">
                            <button class="emoji-picker-btn" id="emojiPickerBtn">&#x1f60a;</button>
                            <input type="text" class="chat-input" id="chatInput" placeholder="Escribe un mensaje..." autocomplete="off">
                        </div>
                        <button class="send-chat-btn" id="sendChatBtn">Enviar</button>
                    </div>
                    <div class="emoji-picker" id="emojiPicker"></div>
                </div>
            </div>
        </div>
		
		<div class="sidebar right-sidebar" id="rankingSidebar">
        <h2><span class="emoji">&#x1f3c6;</span> Rankings</h2>
        <div class="ranking-section">
            <button class="ranking-btn" id="globalRankingBtn">Ranking Global</button>
            <button class="ranking-btn" id="classicRankingBtn">Modo Cl√°sico</button>
            <button class="ranking-btn" id="fiveDigitsRankingBtn">5 D√≠gitos</button>
            <button class="ranking-btn" id="sixDigitsRankingBtn">6 D√≠gitos</button>
            <button class="ranking-btn" id="raceRankingBtn">Modo Carrera</button>
            <button class="ranking-btn" id="myStatsBtn">Mis Estad√≠sticas</button>
        </div>
        <div id="rankingContent"></div>
    </div>
		
    </div>
	
	<div class="global-chat-container" id="globalChatContainer">
    <div class="global-chat-header" id="globalChatToggle">
        <h3>Chat Global</h3>
        <button class="global-chat-toggle" id="globalChatToggleBtn">‚ñº</button>
        <div class="global-chat-notification" id="globalChatNotification" style="display: none;">0</div>
    </div>
    <div class="global-chat-messages" id="globalChatMessages"></div>
    <div class="global-chat-input-container">
        <input type="text" class="global-chat-input" id="globalChatInput" placeholder="Escribe un mensaje..." autocomplete="off">
        <button class="global-chat-send-btn" id="globalChatSendBtn">Enviar</button>
        <div class="user-mention-list" id="userMentionList"></div>
    </div>
</div>
    
    <!-- Modales (mantener igual) -->
    <div class="modal" id="beingInvitedModal" style="display: none;">
        <div class="modal-content">
            <h2>üéÆ ¬°Invitaci√≥n recibida!</h2>
            <p id="beingInvitedText"></p>
            <div class="modal-actions">
                <button class="btn btn-danger" id="cancelBeingInvitedBtn">
                    <span class="emoji">‚úñ</span> Rechazar
                </button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="preInvitationModal" style="display: none;">
        <div class="modal-content">
            <h2>&#x1f3ae; Invitando a jugar</h2>
            <p id="preInvitationText">Est√°s invitando a [nombre] a jugar</p>
            <div class="modal-actions">
                <button class="btn btn-danger" id="cancelPreInviteBtn">
                    <span class="emoji">&#x1f6ab;</span> Cancelar
                </button>
            </div>
        </div>
    </div>
    
    <div class="game-mode-screen" id="gameModeScreen" style="display: none;">
        <div class="card game-mode-card">
            <h2>&#x1f3ae; Selecciona el modo de juego</h2>
            <p id="gameModeOpponentName" style="margin-bottom: 20px;"></p>
            <div class="game-mode-options">
                <button class="game-mode-btn" data-mode="classic">
                    Modo Clasico (4 digitos)
                    <div class="game-mode-description">Adivina un numero de 4 digitos unicos</div>
                </button>
                <button class="game-mode-btn" data-mode="5digits">
                    Modo Avanzado (5 digitos)
                    <div class="game-mode-description">Mayor desafio con numeros de 5 digitos</div>
                </button>
                <button class="game-mode-btn" data-mode="6digits">
                    Modo Experto (6 digitos)
                    <div class="game-mode-description">Para jugadores mas experimentados</div>
                </button>
                <button class="game-mode-btn" data-mode="race">
                    Modo Carrera
                    <div class="game-mode-description">Ambos juegan contra un numero aleatorio</div>
                </button>
            </div>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button class="btn btn-danger" id="cancelGameModeBtn" style="margin-top: 20px;">
                    <span class="emoji">&#x1f6ab;</span> Cancelar
                </button>
                <button class="btn btn-primary" id="confirmGameModeBtn" style="margin-top: 20px;">
                    Confirmar modo de juego
                </button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="invitationModal" style="display: none;">
        <div class="modal-content">
            <h2>&#x1f3ae; ¬°Invitaci√≥n a jugar!</h2>
            <p id="invitationText">Jugador te ha invitado a una partida de Vacas y Toros.</p>
            <p id="invitationGameMode" style="font-weight: bold; margin-bottom: 20px;"></p>
            <div class="modal-actions">
                <button class="btn btn-success" id="acceptInviteBtn">
                    <span class="emoji">&#x2705;</span> Aceptar
                </button>
                <button class="btn btn-danger" id="declineInviteBtn">
                    <span class="emoji">&#x274c;</span> Rechazar
                </button>
            </div>
        </div>
    </div>
    
    <div class="secret-number-screen" id="secretNumberScreen" style="display: none;">
        <div class="card secret-number-card">
            <h2>&#x1f522; Ingresa tu numero secreto</h2>
            <p id="secretNumberInstruction">Elige un numero de <span id="secretNumberLength">4</span> digitos unicos que tu oponente debera adivinar.</p>
            <input type="text" class="input-field" id="secretNumberInput" placeholder="Escribe tu numero aqui" maxlength="6">
            <p id="secretNumberError" style="color: var(--danger-color); margin: 10px 0; display: none;"></p>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button class="btn btn-primary" id="submitSecretNumberBtn" style="margin-top: 10px;">
                    <span class="emoji">&#x1f512;</span> Confirmar numero
                </button>
                <button class="btn btn-danger" id="cancelSecretNumberBtn" style="margin-top: 10px;">
                    <span class="emoji">&#x1f6ab;</span> Cancelar
                </button>
            </div>
        </div>
    </div>
    
    <div class="result-modal" id="resultModal" style="display: none;">
        <div class="result-content">
            <h2 id="resultTitle">&#x1f389; ?Ganaste!</h2>
            <div id="resultMessage"></div>
            <button class="btn btn-primary" id="closeResultBtn">Cerrar</button>
        </div>
    </div>
    
	<div class="modal" id="gameSettingsModal" style="display: none;">
    <div class="modal-content">
        <h2>Configuraci√≥n de Partida</h2>
        
        <div class="form-group">
            <label for="gameModeSelect">Modo de juego:</label>
            <select id="gameModeSelect" class="input-field">
                <option value="race">Carrera</option>
                <option value="classic">Cl√°sico (4 d√≠gitos)</option>
                <option value="5digits">Avanzado (5 d√≠gitos)</option>
                <option value="6digits">Experto (6 d√≠gitos)</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="playerCountInput">N√∫mero de jugadores (2-4):</label>
            <input type="number" id="playerCountInput" class="input-field" min="2" max="4" value="4">
        </div>
        
        <div class="form-group">
            <label for="timeLimitInput">Tiempo por turno (segundos):</label>
            <input type="number" id="timeLimitInput" class="input-field" min="10" max="120" value="45">
        </div>
        
        <div class="modal-actions">
            <button class="btn btn-danger" id="cancelSettingsBtn">Cancelar</button>
            <button class="btn btn-primary" id="confirmSettingsBtn">Crear Partida</button>
        </div>
    </div>
</div>


	
    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>